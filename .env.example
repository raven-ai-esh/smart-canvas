# Copy to `.env` and fill secrets for production. Do not commit `.env`.

# Core
PORT=8787
DATABASE_URL=postgres://postgres:postgres@db:5432/smart_tracker
JWT_SECRET=
AUTH_COOKIE_NAME=auth_token
COOKIE_SECURE=false
CORS_ORIGIN=true
APP_ORIGIN=
ALERT_PUBLIC_BASE_URL=
DEFAULT_SESSION_ID=
TEMP_SESSION_TTL_DAYS=7
REDIS_URL=redis://redis:6379
VITE_MAX_ATTACHMENT_BYTES=33554432

# Observability
LOG_LEVEL=info
LOG_TRACE=false
METRICS_ENABLED=true
METRICS_PATH=/metrics
OTEL_EXPORTER_OTLP_ENDPOINT=
OTEL_SERVICE_NAME=
OTEL_LOG_LEVEL=
ENTITY_COUNT_INTERVAL_MS=60000

# SMTP (optional). If not set, signup returns a dev verification URL instead of sending email.
# Example for STARTTLS on port 587:
# SMTP_URL=smtp://USERNAME:PASSWORD@mail.hosting.reg.ru:587
# If username contains "@", URL-encode it (e.g. tech%40raven-ai.ru).
SMTP_URL=
MAIL_FROM=

# OAuth (optional). If not set, buttons are disabled in UI.
# Google: redirect URL must be `${APP_ORIGIN}/api/auth/google/callback` (or your actual domain).
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
# Yandex: redirect URL must be `${APP_ORIGIN}/api/auth/yandex/callback` (or your actual domain).
YANDEX_CLIENT_ID=
YANDEX_CLIENT_SECRET=

# Telegram (optional).
# You need bot tokens from BotFather and must set the allowed domain in BotFather.
# Auth bot is used for login; alert bot is used for alerting + account linking.
TELEGRAM_AUTH_BOT_USERNAME=
TELEGRAM_AUTH_BOT_TOKEN=
TELEGRAM_ALERT_BOT_USERNAME=
TELEGRAM_ALERT_BOT_TOKEN=
TELEGRAM_ALERT_LINK_TTL_HOURS=24
TELEGRAM_ALERT_WEBHOOK_SECRET=
# Legacy fallback (optional).
TELEGRAM_BOT_USERNAME=
TELEGRAM_BOT_TOKEN=

# OpenAI / assistant
OPENAI_API_KEY=
OPENAI_API_BASE_URL=
OPENAI_MODEL=gpt-5.2
OPENAI_SUMMARY_MODEL=
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_EMBEDDING_DIM=1536
OPENAI_TIMEOUT_MS=60000
ASSISTANT_MODEL_CONTEXT_TOKENS=0
ASSISTANT_SUMMARY_REMAINING_RATIO=0.15
ASSISTANT_OUTPUT_RESERVE_TOKENS=0
ASSISTANT_TOKEN_ESTIMATE_CHARS=4
ASSISTANT_MEMORY_K=5
ASSISTANT_MEMORY_MAX_CHARS=1200
ASSISTANT_MESSAGE_MAX_CHARS=0

# Agent service (python)
AGENT_SERVICE_URL=http://agent:8001/run
AGENT_SERVICE_TIMEOUT_MS=60000
AGENT_LOG_LEVEL=DEBUG
AGENT_LOG_TRUNCATE=5000
AGENT_PROMPT_PATH=/app/data/prompt.txt
AGENT_MODEL_CONTEXT_TOKENS=0

# MCP
MCP_SERVER_URL=http://mcp:7010/mcp
MCP_TECH_TOKEN=raven_tech_token
MCP_TECH_USER_ID=raven-bot
MCP_TECH_USER_NAME=Raven
MCP_TECH_AVATAR_SEED=raven-bot
MCP_TECH_AVATAR_URL=
MCP_TECH_AVATAR_ANIMAL=
MCP_TECH_AVATAR_COLOR=
MCP_AGENT_ALLOWED_TOOLS=
MCP_SNAPSHOT_TIMEOUT_MS=

# Testing defaults
TEST_USER_ENABLED=true
TEST_USER_EMAIL=test@raven-ai.local
TEST_USER_PASSWORD=test1234
TEST_USER_NAME=Test User
